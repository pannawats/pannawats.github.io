<!DOCTYPE html>
<html>
<head>
    <style>
        .node { cursor: pointer; transition: all 0.3s; }
        .node circle { stroke-width: 2px; }
        .link { stroke: #999; stroke-opacity: 0.6; }
        .label { font-family: Arial; text-anchor: middle; dominant-baseline: central; }
        .tooltip { position: absolute; padding: 8px; background: white; border: 1px solid #ddd; border-radius: 4px; pointer-events: none; }
    </style>
</head>
<body>
    <div id="graph"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        const width = 1600, height = 1000;
        const svg = d3.select("#graph").append("svg").attr("width", width).attr("height", height);
        const tooltip = d3.select("body").append("div").attr("class", "tooltip").style("opacity", 0);

        const nodes = [
            { id: "Skin Diversity", type: "main", size: 50 },
            // Main Categories
            { id: "1. Melanin-Based Diversity", type: "category", size: 35 },
            { id: "2. Texture-Based Diversity", type: "category", size: 35 },
            { id: "3. Skin Tone & Undertone", type: "category", size: 35 },
            { id: "4. Hair & Body Hair", type: "category", size: 35 },
            { id: "5. Environmental Response", type: "category", size: 35 },
            { id: "6. Genetic Conditions", type: "category", size: 35 },
            { id: "7. Cultural & Symbolic", type: "category", size: 35 },
            // Sub-items
            { id: "Freckles" }, { id: "Vitiligo" }, { id: "Albinism" }, { id: "Hyperpigmentation" }, { id: "Hypopigmentation" }, { id: "Birthmarks" },
            { id: "Wrinkles & Fine Lines" }, { id: "Stretch Marks" }, { id: "Scars" }, { id: "Keloids" }, { id: "Eczema" }, { id: "Psoriasis" }, { id: "Keratosis Pilaris" },
            { id: "Warm Undertones" }, { id: "Cool Undertones" }, { id: "Neutral Undertones" }, { id: "Olive Undertones" }, { id: "Skin Tone Variations" },
            { id: "Hirsutism" }, { id: "Alopecia" }, { id: "Vellus Hair" }, { id: "Terminal Hair" },
            { id: "Photosensitivity" }, { id: "Rosacea" }, { id: "Sensitive Skin" }, { id: "Dry Skin" }, { id: "Oily Skin" }, { id: "Combination Skin" },
            { id: "Ichthyosis" }, { id: "Epidermolysis Bullosa" }, { id: "Harlequin Ichthyosis" }, { id: "Piebaldism" }, { id: "Mosaicism" },
            { id: "Tattoos" }, { id: "Scarification" }, { id: "Henna & Body Paint" }, { id: "Piercings" }
        ];

        const links = [
            // Connect main node to categories
            { source: "Skin Diversity", target: "1. Melanin-Based Diversity" },
            { source: "Skin Diversity", target: "2. Texture-Based Diversity" },
            { source: "Skin Diversity", target: "3. Skin Tone & Undertone" },
            { source: "Skin Diversity", target: "4. Hair & Body Hair" },
            { source: "Skin Diversity", target: "5. Environmental Response" },
            { source: "Skin Diversity", target: "6. Genetic Conditions" },
            { source: "Skin Diversity", target: "7. Cultural & Symbolic" },
            
            // Melanin-Based
            { source: "1. Melanin-Based Diversity", target: "Freckles" },
            { source: "1. Melanin-Based Diversity", target: "Vitiligo" },
            { source: "1. Melanin-Based Diversity", target: "Albinism" },
            { source: "1. Melanin-Based Diversity", target: "Hyperpigmentation" },
            { source: "1. Melanin-Based Diversity", target: "Hypopigmentation" },
            { source: "1. Melanin-Based Diversity", target: "Birthmarks" },
            
            // Texture-Based
            { source: "2. Texture-Based Diversity", target: "Wrinkles & Fine Lines" },
            { source: "2. Texture-Based Diversity", target: "Stretch Marks" },
            { source: "2. Texture-Based Diversity", target: "Scars" },
            { source: "2. Texture-Based Diversity", target: "Keloids" },
            { source: "2. Texture-Based Diversity", target: "Eczema" },
            { source: "2. Texture-Based Diversity", target: "Psoriasis" },
            { source: "2. Texture-Based Diversity", target: "Keratosis Pilaris" },
            
            // Skin Tone & Undertone
            { source: "3. Skin Tone & Undertone", target: "Warm Undertones" },
            { source: "3. Skin Tone & Undertone", target: "Cool Undertones" },
            { source: "3. Skin Tone & Undertone", target: "Neutral Undertones" },
            { source: "3. Skin Tone & Undertone", target: "Olive Undertones" },
            { source: "3. Skin Tone & Undertone", target: "Skin Tone Variations" },
            
            // Hair & Body Hair
            { source: "4. Hair & Body Hair", target: "Hirsutism" },
            { source: "4. Hair & Body Hair", target: "Alopecia" },
            { source: "4. Hair & Body Hair", target: "Vellus Hair" },
            { source: "4. Hair & Body Hair", target: "Terminal Hair" },
            
            // Environmental Response
            { source: "5. Environmental Response", target: "Photosensitivity" },
            { source: "5. Environmental Response", target: "Rosacea" },
            { source: "5. Environmental Response", target: "Sensitive Skin" },
            { source: "5. Environmental Response", target: "Dry Skin" },
            { source: "5. Environmental Response", target: "Oily Skin" },
            { source: "5. Environmental Response", target: "Combination Skin" },
            
            // Genetic Conditions
            { source: "6. Genetic Conditions", target: "Ichthyosis" },
            { source: "6. Genetic Conditions", target: "Epidermolysis Bullosa" },
            { source: "6. Genetic Conditions", target: "Harlequin Ichthyosis" },
            { source: "6. Genetic Conditions", target: "Piebaldism" },
            { source: "6. Genetic Conditions", target: "Mosaicism" },
            
            // Cultural & Symbolic
            { source: "7. Cultural & Symbolic", target: "Tattoos" },
            { source: "7. Cultural & Symbolic", target: "Scarification" },
            { source: "7. Cultural & Symbolic", target: "Henna & Body Paint" },
            { source: "7. Cultural & Symbolic", target: "Piercings" }
        ];

        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-800))
            .force("center", d3.forceCenter(width/2, height/2))
            .force("collision", d3.forceCollide().radius(d => (d.size || 20) + 5));

        const link = svg.append("g").selectAll("line").data(links).enter().append("line").attr("class", "link");

        const node = svg.append("g").selectAll("g").data(nodes).enter().append("g")
            .call(d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended));

        node.append("circle")
            .attr("r", d => d.size || 20)
            .attr("fill", d => {
                if(d.type === "main") return "#FF69B4";
                if(d.type === "category") return "#FFD700";
                return "#98FB98";
            })
            .on("mouseover", showTooltip)
            .on("mouseout", hideTooltip);

        node.append("text").attr("class", "label")
            .text(d => d.id)
            .attr("dy", d => (d.size || 20) + 10)
            .style("font-size", d => d.type === "main" ? "24px" : d.type === "category" ? "18px" : "14px")
            .style("font-weight", d => d.type ? "bold" : "normal");

        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x).attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x).attr("y2", d => d.target.y);
            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        function dragstarted(event) { if (!event.active) simulation.alphaTarget(0.3).restart(); }
        function dragged(event) { event.subject.fx = event.x; event.subject.fy = event.y; }
        function dragended(event) { if (!event.active) simulation.alphaTarget(0); }

        function showTooltip(event, d) {
            tooltip.transition().duration(200).style("opacity", .9)
                .html(d.id).style("left", (event.pageX + 10) + "px").style("top", (event.pageY - 28) + "px");
        }
        function hideTooltip() { tooltip.transition().duration(500).style("opacity", 0); }
    </script>
</body>
</html>
